<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tarefas</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#2c3e50" />
  
  <style>
    :root {
      --bg-light: #f9f9f9;
      --bg-dark: #2c3e50;
      --text-light: #000;
      --text-dark: #fff;
    }
    
    body {
      background: var(--bg-light);
      color: var(--text-light);
      max-width: 400px;
      margin: 0 auto;
    }
    
    body.dark {
      background: var(--bg-dark);
      color: var(--text-dark);
    }
    
    .modo-btn {
      position: fixed;
      top: 5px;
      right: 5px;
    }
    
    .input-area input {
      width: 70%;
    }
    
    li {
      background: #fff;
      margin: 5px 0;
    }
    
    body.dark li {
      background: #34495e;
    }
    
    li.done {
      text-decoration: line-through;
    }
  </style>
  
</head>

<body>
  
  <button class="modo-btn" onclick="alternarModo()">🌗</button>
  <h1>📝 Lista de Tarefas</h1>
  
  <div class="input-area">
    <input id="novaTarefa" type="text" placeholder="Adicione uma tarefa" />
    <button onclick="adicionarTarefa()">+</button>
  </div>
  
  <ul id="lista"></ul>
  
  <script>
    const novaTarefa = document.getElementById('novaTarefa');
    const lista = document.getElementById('lista');
    let tarefas = JSON.parse(localStorage.getItem('tarefas')) || [];
    
    function salvar() {
      localStorage.setItem('tarefas', JSON.stringify(tarefas));
    }
    
    function renderizar() {
      lista.innerHTML = '';
      tarefas.forEach((tarefa, index) => {
        const li = document.createElement('li');
        li.className = tarefa.feita ? 'done' : '';
        li.innerHTML = `
          <span>${tarefa.texto}</span>
          <div class="actions">
            <button onclick="toggle(${index})">✅</button>
            <button onclick="remover(${index})">🗑️</button>
          </div>
        `;
        lista.appendChild(li);
      });
    }
    
    function adicionarTarefa() {
      const texto = novaTarefa.value.trim();
      if (!texto) return;
      tarefas.push({ texto, feita: false });
      novaTarefa.value = '';
      salvar();
      renderizar();
    }
    
    function remover(index) {
      tarefas.splice(index, 1);
      salvar();
      renderizar();
    }
    
    function toggle(index) {
      tarefas[index].feita = !tarefas[index].feita;
      salvar();
      renderizar();
    }
    
    function alternarModo() {
      document.body.classList.toggle('dark');
      const modo = document.body.classList.contains('dark') ? 'dark' : 'light';
      localStorage.setItem('modo', modo);
    }
    
    function carregarModo() {
      const modo = localStorage.getItem('modo');
      if (modo === 'dark') {
        document.body.classList.add('dark');
      }
    }
    
    // Inicialização
    carregarModo();
    renderizar();
    
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then(registration => {
            console.log('Service Worker registrado com sucesso:', registration);
          })
          .catch(error => {
            console.log('Falha ao registrar o Service Worker:', error);
          });
      });
    }
  </script>
  
  
  
</body>

</html>